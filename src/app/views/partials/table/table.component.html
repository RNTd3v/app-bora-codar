<div class="c-table">

  <mat-spinner *ngIf="isLoadingResults; else table"></mat-spinner>

  <ng-template #table>

    <table mat-table [dataSource]="dataSource" matSort matSortActive="id" matSortDisableClear matSortDirection="desc" (matSortChange)="sortData($event)">

      <ng-container [matColumnDef]="column?.id" *ngFor="let column of columns">
        <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>
          {{ column?.name }}
        </th>
        <td mat-cell *matCellDef="let data">
          {{ data[column?.id] }}
        </td>
      </ng-container>

      <!-- Action Column -->
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let data">
          <div class="c-buttons -end">
            <button class="o-button -icon -edit" (click)="action(data, 'edit')">
              <app-icon [name]="'pen'"></app-icon>
            </button>
            <button class="o-button -icon -delete" (click)="action(data, 'delete')">
              <app-icon [name]="'trash'"></app-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

    </table>

  </ng-template>

</div>
