<div class="c-modal-content update-user">

  <mat-progress-bar mode="indeterminate" *ngIf="isLoadingPage; else form"></mat-progress-bar>

  <ng-template #form>

    <app-upload [isAvatar]="true" [data]="componentData" (uploadedTheFile)="uploadedTheAvatarFile()"></app-upload>

    <form class="c-form col-2 form-user" [formGroup]="formUser" (submit)="submitUserData()">

      <mat-form-field appearance="fill">
        <mat-label>Nome</mat-label>
        <input matInput formControlName="name" required>
        <mat-error *ngIf="showMessageError('name')">{{getErrorMessage('name')}}</mat-error>
      </mat-form-field>

      <mat-form-field appearance="fill">
        <mat-label>E-mail</mat-label>
        <input matInput formControlName="email" required>
        <mat-error *ngIf="showMessageError('email')">{{getErrorMessage('email')}}</mat-error>
      </mat-form-field>

      <app-auto-complete-chips
        title="Perfis"
        textInput="Add perfil ..."
        [list]="allRoles"
        [chips]="rolesNames"
        (handleAddedAChip)="addRoleId($event)"
        (handleRemovingAChip)="removeRoleId($event)">
      </app-auto-complete-chips>

      <mat-checkbox formControlName="isActive">Ativo</mat-checkbox>

      <div class="bottom-grid">
        <cms-button type="submit" buttonText="Salvar" iconLeftName="save" buttonClasses='-add' [disableButton]="formInvalid" [isLoadingAction]="isLoadingAction"></cms-button>
        <cms-button buttonText="Cancelar" buttonClasses='-link' (clickButtonEvent)="cancel()" class="button-right"></cms-button>
      </div>

    </form>

  </ng-template>

</div>
